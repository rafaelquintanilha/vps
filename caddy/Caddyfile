n8n.quantbrasil.com.br {
  header X-Robots-Tag "noindex, nofollow"
  reverse_proxy n8n:5678
}

metabase.quantbrasil.com.br {
  reverse_proxy metabase:3000
}

pronto.rafaelquintanilha.com {
  # Define matchers for backend routes (no auth)
  @api path /api/*
  @webhooks path /webhooks/*
  @healthz path /healthz
  @deploy path /deploy /deploy/*

  # Backend routes - NO auth
  handle @api {
    reverse_proxy pronto-backend:3000
  }
  handle @webhooks {
    reverse_proxy pronto-backend:3000
  }
  handle @healthz {
    reverse_proxy pronto-backend:3000
  }
  handle @deploy {
    reverse_proxy pronto-backend:3000
  }

  # Static frontend files - WITH Basic Auth
  handle {
    basic_auth {
      {$PRONTO_BASIC_AUTH_USER} {$PRONTO_BASIC_AUTH_HASH}
    }
    root * /srv/pronto-frontend
    try_files {path} /index.html
    file_server
  }
}

obs-chat.quantbrasil.com.br {
  reverse_proxy obs-chat-spotlight:3030
}
